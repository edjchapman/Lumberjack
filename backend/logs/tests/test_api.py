from django.test import TestCase
from rest_framework.status import HTTP_201_CREATED
from rest_framework.test import APIClient


class TestExceptionLogApi(TestCase):
    def test_log_can_be_posted_to_the_exception_log_endpoint(self):
        client = APIClient()
        response = client.post("/api/logs/", self._get_log_fixture())
        self.assertEquals(response.status_code, HTTP_201_CREATED)
        self.assertEquals(response.data["subject"], self._get_log_fixture()["subject"])

    @staticmethod
    def _get_log_fixture() -> dict:
        return {
            "id": 3214720,
            "project_name": "PROJECT_A",
            "appenv": "DEVELOPMENT",
            "app_location": "LONDON",
            "created_at": "2021-01-13 11:54:10.236071+00",
            "level": 40,
            "subject": "ERROR: 'NoneType' object has no attribute 'delivery_slot_id'",
            "logger_name": "helper.services.crontab",
            "path_name": "/usr/local/lib/python3.7/site-packages/helper/services/crontab.py",
            "func_name": "run",
            "line_num": 49,
            "traceback": "Report\n'NoneType' object has no attribute 'delivery_slot_id'\n\nDjango Version: 3.1.4\nPython Executable: /usr/local/bin/python\nPython Version: 3.7.9\nPython Path: ['/code', '/usr/local/lib/python37.zip', '/usr/local/lib/python3.7', '/usr/local/lib/python3.7/lib-dynload', '/usr/local/lib/python3.7/site-packages']\nServer time: Wed, 13 Jan 2021 11:54:10 +0000\nInstalled Applications:\n['django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'rest_framework',\n 'corsheaders',\n 'debug_toolbar',\n 'report_builder',\n 'django_filters',\n 'algoliasearch_django',\n 'helper',\n 'channels',\n 'products_core',\n 'ingredients_core',\n 'accounts',\n 'addresses',\n 'authentication',\n 'comments',\n 'common',\n 'company',\n 'contacts',\n 'crm',\n 'currencies',\n 'customers',\n 'deliveryslots',\n 'documents',\n 'foneco',\n 'forecasts',\n 'goodsin',\n 'home_deliveries',\n 'historylog',\n 'intrastat',\n 'issues',\n 'kanbancards',\n 'locations',\n 'logmachine',\n 'edapp',\n 'edpro',\n 'edbowl',\n 'notifications',\n 'nonconformities',\n 'openedi',\n 'orders',\n 'payments',\n 'pickingstations',\n 'pricelist',\n 'printers',\n 'print_queue',\n 'productcategorys',\n 'products',\n 'promocodes',\n 'push',\n 'purchases',\n 'replacements',\n 'retail',\n 'returns',\n 'runs',\n 'sage',\n 'specialprices',\n 'standingorders',\n 'stock',\n 'substitutions',\n 'supplierprices',\n 'suppliers',\n 'trades',\n 'transport',\n 'units',\n 'users',\n 'voip']\nInstalled Middleware:\n['corsheaders.middleware.CorsMiddleware',\n 'django.middleware.security.SecurityMiddleware',\n 'authentication.middleware.AuthenticationMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n 'django.middleware.gzip.GZipMiddleware',\n 'debug_toolbar.middleware.DebugToolbarMiddleware',\n 'common.middleware.ProfilingMiddleware']\n\nRequest data not supplied\n\nSettings:\nUsing settings module project_a.settings\nABSOLUTE_URL_OVERRIDES = {}\nADMINS = [('Technology', 'logs@ed.com')]\nALGOLIA = {'APPLICATION_ID': 'GBZZZAQRXX', 'API_KEY': '********************'}\nALLOWED_HOSTS = ['project_a-development.uk.ed.com', '.project_a-development.uk.ed.com.']\nALLOWED_NETWORKS = ['127.0.0.1', '182.19.0.0/22', '182.17.0.0/22', '192.168.32.1/24', 'localhost']\nAPPEND_SLASH = True\nAPPENV = 'DEVELOPMENT'\nAPP_LOCATION = 'LONDON'\nASGI_APPLICATION = 'project_a.asgi.application'\nAUTHENTICATION_BACKENDS = ['django.contrib.auth.backends.ModelBackend']\nAUTH_PASSWORD_VALIDATORS = '********************'\nAUTH_USER_MODEL = 'users.User'\nBASE_DIR = '/code'\nCACHES = {'default': {'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache', 'LOCATION': '127.0.0.1:11211'}}\nCACHE_MIDDLEWARE_ALIAS = 'default'\nCACHE_MIDDLEWARE_KEY_PREFIX = '********************'\nCACHE_MIDDLEWARE_SECONDS = 600\nCHANNEL_LAYERS = {'default': {'BACKEND': 'channels_redis.core.RedisChannelLayer', 'CONFIG': {'hosts': [('redis', 6379)]}}}\nCORS_ORIGIN_ALLOW_ALL = True\nCRM_DELIVERY_COUNTRY = 'UK'\nCRM_INIT_CONFIG = {'client_id': '1000.VLTHFHGIJEFTF87SQ5HEOW9O9BRAAR', 'client_secret': '********************', 'redirect_uri': 'https://project_a-development.uk.ed.com', 'accounts_url': 'https://accounts.zoho.eu', 'token_persistence_path': '********************', 'sandbox': 'True', 'apiBaseUrl': '********************', 'applicationLogFilePath': '//logs/crm_errors', 'currentUserEmail': 'ed@goldstarit.com'}\nCSRF_COOKIE_AGE = 31449600\nCSRF_COOKIE_DOMAIN = None\nCSRF_COOKIE_HTTPONLY = False\nCSRF_COOKIE_NAME = 'csrftoken'\nCSRF_COOKIE_PATH = '/'\nCSRF_COOKIE_SAMESITE = 'Lax'\nCSRF_COOKIE_SECURE = False\nCSRF_FAILURE_VIEW = 'django.views.csrf.csrf_failure'\nCSRF_HEADER_NAME = 'HTTP_X_CSRFTOKEN'\nCSRF_TRUSTED_ORIGINS = ['project_a-development.uk.ed.com', '.project_a-development.uk.ed.com.', 'localhost:9000', '0.0.0.0:9000']\nCSRF_USE_SESSIONS = False\nCUSTOM_INSTALLED_APPS = ['accounts', 'addresses', 'authentication', 'comments', 'common', 'company', 'contacts', 'crm', 'currencies', 'customers', 'deliveryslots', 'documents', 'foneco', 'forecasts', 'goodsin', 'home_deliveries', 'historylog', 'intrastat', 'issues', 'kanbancards', 'locations', 'logmachine', 'edapp', 'edpro', 'edbowl', 'notifications', 'nonconformities', 'openedi', 'orders', 'payments', 'pickingstations', 'pricelist', 'printers', 'print_queue', 'productcategorys', 'products', 'promocodes', 'push', 'purchases', 'replacements', 'retail', 'returns', 'runs', 'sage', 'specialprices', 'standingorders', 'stock', 'substitutions', 'supplierprices', 'suppliers', 'trades', 'transport', 'units', 'users', 'voip']\nDAPHNE_DIR = '/run/daphne'\nDATABASES = {'default': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'ed', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=ed,project_a'}, 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'TIME_ZONE': None, 'TEST': {'CHARSET': None, 'COLLATION': None, 'MIGRATE': True, 'MIRROR': None, 'NAME': None}}, 'replica1': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'ed', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=ed,project_a'}}, 'replica2': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'ed', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=ed,project_a'}}, 'replica3': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'ed', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=ed,project_a'}}, 'replica4': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'ed', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=ed,project_a'}}, 'historylog': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'ed', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=ed,historylog'}}, 'home_deliveries': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'home-delivery', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=home-delivery,home-delivery'}}, 'edapp': {'ENGINE': 'django.db.backends.mysql', 'NAME': 'app', 'HOST': 'edapp-db-development-ldn.uk.ed.com', 'PORT': '3306', 'USER': 'app', 'PASSWORD': '********************'}, 'edpro': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'edpro', 'HOST': 'edpro-db-development-ldn.uk.ed.com', 'PORT': '5432', 'USER': 'edpro', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=edpro,edpro'}}, 'edbowl': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'edbowl', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=edbowl,edbowl'}}, 'global_users': {'ENGINE': 'django.db.backends.postgresql', 'NAME': 'ed-pro-global', 'HOST': 'project_a-development.uk.ed.com', 'PORT': '5432', 'USER': 'project_a', 'PASSWORD': '********************', 'OPTIONS': {'options': '-c search_path=ed-pro-global,ed-pro-global'}}}\nDATABASE_ROUTERS = ['historylog.router.HistoryLogRouter', 'home_deliveries.router.HomeDeliveriesRouter', 'edbowl.router.edBowlRouter', 'edapp.router.edAppRouter', 'edpro.router.edProRouter', 'project_a.router.DefaultRouter']\nDATA_UPLOAD_MAX_MEMORY_SIZE = 2621440\nDATA_UPLOAD_MAX_NUMBER_FIELDS = None\nDATETIME_FORMAT = 'N j, Y, P'\nDATETIME_INPUT_FORMAT = '%d/%m/%Y %H:%M'\nDATETIME_INPUT_FORMATS = ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M']\nDATE_FORMAT = '%d/%m/%Y'\nDATE_INPUT_FORMATS = ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y']\nDEBUG = False\nDEBUG_PROPAGATE_EXCEPTIONS = False\nDEBUG_TOOLBAR_PANELS = ['debug_toolbar.panels.versions.VersionsPanel', 'debug_toolbar.panels.timer.TimerPanel', 'debug_toolbar.panels.settings.SettingsPanel', 'debug_toolbar.panels.headers.HeadersPanel', 'debug_toolbar.panels.request.RequestPanel', 'debug_toolbar.panels.sql.SQLPanel', 'debug_toolbar.panels.staticfiles.StaticFilesPanel', 'debug_toolbar.panels.templates.TemplatesPanel', 'debug_toolbar.panels.cache.CachePanel', 'debug_toolbar.panels.signals.SignalsPanel', 'debug_toolbar.panels.logging.LoggingPanel', 'debug_toolbar.panels.redirects.RedirectsPanel']\nDECIMAL_SEPARATOR = '.'\nDEFAULT_CHARSET = 'utf-8'\nDEFAULT_EXCEPTION_REPORTER = 'django.views.debug.ExceptionReporter'\nDEFAULT_EXCEPTION_REPORTER_FILTER = 'django.views.debug.SafeExceptionReporterFilter'\nDEFAULT_FILE_STORAGE = 'django.core.files.storage.FileSystemStorage'\nDEFAULT_FROM_EMAIL = 'ed (PROJECT_A Playground LDN) <no-reply@ed.com>'\nDEFAULT_HASHING_ALGORITHM = 'sha256'\nDEFAULT_INDEX_TABLESPACE = ''\nDEFAULT_TABLESPACE = ''\nDISALLOWED_USER_AGENTS = []\nDJANGO_INSTALLED_APPS = ['django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles']\nEMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'\nEMAIL_HOST = 'phonemail.ed.co.uk'\nEMAIL_HOST_PASSWORD = '********************'\nEMAIL_HOST_USER = ''\nEMAIL_PORT = 25\nEMAIL_SSL_CERTFILE = None\nEMAIL_SSL_KEYFILE = '********************'\nEMAIL_SUBJECT_PREFIX = '[PROJECT_A Playground Ldn] '\nEMAIL_TIMEOUT = None\nEMAIL_USE_LOCALTIME = False\nEMAIL_USE_SSL = False\nEMAIL_USE_TLS = False\nFCM_DJANGO_SETTINGS = {'FCM_SERVER_KEY': '********************', 'ONE_DEVICE_PER_USER': False, 'DELETE_INACTIVE_DEVICES': False}\nFE_DATE_FORMAT = '%d/%m/%Y'\nFILE_UPLOAD_DIRECTORY_PERMISSIONS = None\nFILE_UPLOAD_HANDLERS = ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler']\nFILE_UPLOAD_MAX_MEMORY_SIZE = 2621440\nFILE_UPLOAD_PERMISSIONS = 420\nFILE_UPLOAD_TEMP_DIR = None\nFIREBASE_APP = None\nFIRST_DAY_OF_WEEK = 0\nFIXTURE_DIRS = []\nFONECO_API_KEY = '********************'\nFONECO_ENDPOINTS = {'list_calls': 'https://api.konexim.net/v2/getcdr.php', 'get_call': 'https://api.konexim.net/v2/getrecording.php', 'list_users': 'https://api.konexim.net/v2/getusers.php', 'list_voice_mails': 'https://api.konexim.net/v2/voicemail-list.php', 'get_voice_mail': 'https://api.konexim.net/v2/voicemail-get.php'}\nFORCE_SCRIPT_NAME = None\nFORMAT_MODULE_PATH = ['project_a.formats']\nFORM_RENDERER = 'django.forms.renderers.DjangoTemplates'\nIGNORABLE_404_URLS = []\nINSTALLED_APPS = ['django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'rest_framework', 'corsheaders', 'debug_toolbar', 'report_builder', 'django_filters', 'algoliasearch_django', 'helper', 'channels', 'products_core', 'ingredients_core', 'accounts', 'addresses', 'authentication', 'comments', 'common', 'company', 'contacts', 'crm', 'currencies', 'customers', 'deliveryslots', 'documents', 'foneco', 'forecasts', 'goodsin', 'home_deliveries', 'historylog', 'intrastat', 'issues', 'kanbancards', 'locations', 'logmachine', 'edapp', 'edpro', 'edbowl', 'notifications', 'nonconformities', 'openedi', 'orders', 'payments', 'pickingstations', 'pricelist', 'printers', 'print_queue', 'productcategorys', 'products', 'promocodes', 'push', 'purchases', 'replacements', 'retail', 'returns', 'runs', 'sage', 'specialprices', 'standingorders', 'stock', 'substitutions', 'supplierprices', 'suppliers', 'trades', 'transport', 'units', 'users', 'voip']\nINTERNAL_IPS = \"('localhost', '127.0.0.1')\"\nLANGUAGES = [('af', 'Afrikaans'), ('ar', 'Arabic'), ('ar-dz', 'Algerian Arabic'), ('ast', 'Asturian'), ('az', 'Azerbaijani'), ('bg', 'Bulgarian'), ('be', 'Belarusian'), ('bn', 'Bengali'), ('br', 'Breton'), ('bs', 'Bosnian'), ('ca', 'Catalan'), ('cs', 'Czech'), ('cy', 'Welsh'), ('da', 'Danish'), ('de', 'German'), ('dsb', 'Lower Sorbian'), ('el', 'Greek'), ('en', 'English'), ('en-au', 'Australian English'), ('en-gb', 'British English'), ('eo', 'Esperanto'), ('es', 'Spanish'), ('es-ar', 'Argentinian Spanish'), ('es-co', 'Colombian Spanish'), ('es-mx', 'Mexican Spanish'), ('es-ni', 'Nicaraguan Spanish'), ('es-ve', 'Venezuelan Spanish'), ('et', 'Estonian'), ('eu', 'Basque'), ('fa', 'Persian'), ('fi', 'Finnish'), ('fr', 'French'), ('fy', 'Frisian'), ('ga', 'Irish'), ('gd', 'Scottish Gaelic'), ('gl', 'Galician'), ('he', 'Hebrew'), ('hi', 'Hindi'), ('hr', 'Croatian'), ('hsb', 'Upper Sorbian'), ('hu', 'Hungarian'), ('hy', 'Armenian'), ('ia', 'Interlingua'), ('id', 'Indonesian'), ('ig', 'Igbo'), ('io', 'Ido'), ('is', 'Icelandic'), ('it', 'Italian'), ('ja', 'Japanese'), ('ka', 'Georgian'), ('kab', 'Kabyle'), ('kk', 'Kazakh'), ('km', 'Khmer'), ('kn', 'Kannada'), ('ko', 'Korean'), ('ky', 'Kyrgyz'), ('lb', 'Luxembourgish'), ('lt', 'Lithuanian'), ('lv', 'Latvian'), ('mk', 'Macedonian'), ('ml', 'Malayalam'), ('mn', 'Mongolian'), ('mr', 'Marathi'), ('my', 'Burmese'), ('nb', 'Norwegian Bokmål'), ('ne', 'Nepali'), ('nl', 'Dutch'), ('nn', 'Norwegian Nynorsk'), ('os', 'Ossetic'), ('pa', 'Punjabi'), ('pl', 'Polish'), ('pt', 'Portuguese'), ('pt-br', 'Brazilian Portuguese'), ('ro', 'Romanian'), ('ru', 'Russian'), ('sk', 'Slovak'), ('sl', 'Slovenian'), ('sq', 'Albanian'), ('sr', 'Serbian'), ('sr-latn', 'Serbian Latin'), ('sv', 'Swedish'), ('sw', 'Swahili'), ('ta', 'Tamil'), ('te', 'Telugu'), ('tg', 'Tajik'), ('th', 'Thai'), ('tk', 'Turkmen'), ('tr', 'Turkish'), ('tt', 'Tatar'), ('udm', 'Udmurt'), ('uk', 'Ukrainian'), ('ur', 'Urdu'), ('uz', 'Uzbek'), ('vi', 'Vietnamese'), ('zh-hans', 'Simplified Chinese'), ('zh-hant', 'Traditional Chinese')]\nLANGUAGES_BIDI = ['he', 'ar', 'ar-dz', 'fa', 'ur']\nLANGUAGE_CODE = 'en-gb'\nLANGUAGE_COOKIE_AGE = None\nLANGUAGE_COOKIE_DOMAIN = None\nLANGUAGE_COOKIE_HTTPONLY = False\nLANGUAGE_COOKIE_NAME = 'django_language'\nLANGUAGE_COOKIE_PATH = '/'\nLANGUAGE_COOKIE_SAMESITE = None\nLANGUAGE_COOKIE_SECURE = False\nLOCALE_PATHS = []\nLOCAL_ENV_INSTALLED_APPS = []\nLOGGING = {'version': 1, 'disable_existing_loggers': False, 'formatters': {'verbose': {'format': 'log_level=({levelname}) log_datetime=({asctime}) log_name=({name}) module=({module}) function=({funcName}) process_id=({process:d}) thread_id=({thread:d}) line_number=({lineno}) node_name=(ace7a76e9ffa) {message}', 'style': '{'}, 'standard': {'format': 'log_level=({levelname}) log_datetime=({asctime}) {message}', 'style': '{'}}, 'filters': {'require_debug_true': {'()': 'django.utils.log.RequireDebugTrue'}}, 'handlers': {'console': {'level': 'DEBUG', 'filters': ['require_debug_true'], 'class': 'logging.StreamHandler', 'formatter': 'verbose'}, 'log_machine': {'level': 'ERROR', 'class': 'logmachine.handlers.ExceptionHandler'}, 'info_logfile': {'level': 'INFO', 'class': 'logging.FileHandler', 'formatter': 'verbose', 'filename': '//logs/info_logfile.log'}, 'error_logfile': {'level': 'ERROR', 'class': 'logging.FileHandler', 'formatter': 'verbose', 'filename': '//logs/error_logfile.log'}, 'debug_logfile': {'level': 'DEBUG', 'class': 'logging.FileHandler', 'formatter': 'verbose', 'filename': '//logs/debug_logfile.log'}, 'edapp_info_logfile': {'level': 'INFO', 'class': 'logging.FileHandler', 'formatter': 'verbose', 'filename': '//logs/edapp_info_logfile.log'}, 'edpro_info_logfile': {'level': 'INFO', 'class': 'logging.FileHandler', 'formatter': 'verbose', 'filename': '//logs/edpro_info_logfile.log'}, 'splunk_logfile': {'level': 'INFO', 'class': 'logging.FileHandler', 'formatter': 'verbose', 'filename': '//logs/splunk_logfile.log'}}, 'loggers': {'': {'handlers': ['console', 'log_machine', 'info_logfile', 'error_logfile', 'debug_logfile'], 'level': 'INFO'}}}\nLOGGING_CONFIG = 'logging.config.dictConfig'\nLOGIN_REDIRECT_URL = '/accounts/profile/'\nLOGIN_URL = '/accounts/login/'\nLOGOUT_REDIRECT_URL = None\nLOG_DIR = '//logs/'\nLOG_LEVEL = 'INFO'\nLOG_MACHINE = {'PROJECT_NAME': 'PROJECT_A', 'APPENV': 'DEVELOPMENT', 'APP_LOCATION': 'LONDON', 'LOG_MACHINE_URL': 'https://lumberjack.ed.com'}\nLOG_PATH = '//logs/crm_errors'\nMANAGERS = []\nMEDIA_ROOT = '/media'\nMEDIA_URL = '/media/'\nMESSAGE_STORAGE = 'django.contrib.messages.storage.fallback.FallbackStorage'\nMIDDLEWARE = ['corsheaders.middleware.CorsMiddleware', 'django.middleware.security.SecurityMiddleware', 'authentication.middleware.AuthenticationMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'django.middleware.gzip.GZipMiddleware', 'debug_toolbar.middleware.DebugToolbarMiddleware', 'common.middleware.ProfilingMiddleware']\nMIGRATION_MODULES = {}\nMONTH_DAY_FORMAT = 'F j'\ned_CORE_INSTALLED_APPS = ['products_core', 'ingredients_core']\nNUMBER_GROUPING = 0\nOUTSIDE_PROJECT_DIR = '/'\nPASSWORD_HASHERS = '********************'\nPASSWORD_RESET_TIMEOUT = '********************'\nPASSWORD_RESET_TIMEOUT_DAYS = '********************'\nPREPEND_WWW = False\nREDIS_HOST = 'redis'\nREST_FRAMEWORK = {'TEST_REQUEST_DEFAULT_FORMAT': 'json', 'TEST_REQUEST_RENDERER_CLASSES': ('rest_framework.renderers.JSONRenderer',), 'DEFAULT_PERMISSION_CLASSES': ('rest_framework.permissions.IsAuthenticated', 'rest_framework.permissions.DjangoModelPermissions'), 'DEFAULT_AUTHENTICATION_CLASSES': ('authentication.authentication.ExpiringTokenAuthentication', 'rest_framework.authentication.BasicAuthentication', 'rest_framework.authentication.SessionAuthentication')}\nROOT_URLCONF = 'project_a.urls'\nSECRET_KEY = '********************'\nSECURE_BROWSER_XSS_FILTER = False\nSECURE_CONTENT_TYPE_NOSNIFF = True\nSECURE_HSTS_INCLUDE_SUBDOMAINS = False\nSECURE_HSTS_PRELOAD = False\nSECURE_HSTS_SECONDS = 0\nSECURE_PROXY_SSL_HEADER = None\nSECURE_REDIRECT_EXEMPT = []\nSECURE_REFERRER_POLICY = 'same-origin'\nSECURE_SSL_HOST = None\nSECURE_SSL_REDIRECT = False\nSERVER_EMAIL = 'PROJECT_A Playground Ldn <logs@ed.com>'\nSERVER_HOST_NAME = 'ace7a76e9ffa'\nSESSION_CACHE_ALIAS = 'default'\nSESSION_COOKIE_AGE = 1209600\nSESSION_COOKIE_DOMAIN = None\nSESSION_COOKIE_HTTPONLY = False\nSESSION_COOKIE_NAME = 'sessionid'\nSESSION_COOKIE_PATH = '/'\nSESSION_COOKIE_SAMESITE = 'Lax'\nSESSION_COOKIE_SECURE = False\nSESSION_ENGINE = 'django.contrib.sessions.backends.db'\nSESSION_EXPIRE_AT_BROWSER_CLOSE = False\nSESSION_FILE_PATH = None\nSESSION_SAVE_EVERY_REQUEST = False\nSESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'\nSETTINGS_MODULE = 'project_a.settings'\nSHORT_DATETIME_FORMAT = 'm/d/Y P'\nSHORT_DATE_FORMAT = 'm/d/Y'\nSIDEKICK = {'SIDEKICK_REGISTERED_APPS': ['crm', 'home_deliveries', 'goodsin', 'kanbancards', 'edbowl', 'edapp', 'edpro', 'nonconformities', 'openedi', 'orders', 'printers', 'print_queue', 'products', 'push', 'retail', 'specialprices', 'standingorders', 'stock', 'substitutions', 'supplierprices', 'suppliers', 'users', 'voip'], 'MANAGE_PATH': '/code/manage.py', 'CRON_PATH': '/var/spool/cron/crontabs/root', 'LOCK_PATH': '/helper/lock_files/'}\nSIGNING_BACKEND = 'django.core.signing.TimestampSigner'\nSILENCED_SYSTEM_CHECKS = []\nSTATICFILES_DIRS = ['/code/admin/static']\nSTATICFILES_FINDERS = ['django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder']\nSTATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'\nSTATIC_ROOT = '/static'\nSTATIC_URL = '/static/'\nSTRIPE_PUBLIC_KEY = '********************'\nSTRIPE_SECRET_KEY = '********************'\nSYSTEM_UUID = None\nTEMPLATES = [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': ['/code/admin/templates'], 'APP_DIRS': True, 'OPTIONS': {'context_processors': ['django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages', 'django.template.context_processors.static', 'django.template.context_processors.media', 'admin.context_processors.appenv']}}]\nTESTING = False\nTEST_NON_SERIALIZED_APPS = []\nTEST_RUNNER = 'django.test.runner.DiscoverRunner'\nTHIRD_PARTY_INSTALLED_APPS = ['rest_framework', 'corsheaders', 'debug_toolbar', 'report_builder', 'django_filters', 'algoliasearch_django', 'helper', 'channels']\nTHOUSAND_SEPARATOR = ','\nTIME_FORMAT = 'P'\nTIME_INPUT_FORMATS = ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M']\nTIME_ZONE = 'Europe/London'\nTOKEN_PATH = '********************'\nTWILIO_ACCOUNT_SID = 'AC38980f404451d0eecdd7c4ebb67c615b'\nTWILIO_ALERT_RECIPIENTS = [{'phone_number': '+4407412262095', 'name': 'Carlos'}, {'phone_number': '+4407941192411', 'name': 'Edward'}, {'phone_number': '+4407470987994', 'name': 'Giacomo'}, {'phone_number': '+4407876157954', 'name': 'Arpad'}]\nTWILIO_AUTH_TOKEN = '********************'\nTWILIO_PHONE_NUMBER = '+441905704048'\nUSE_I18N = True\nUSE_L10N = True\nUSE_THOUSAND_SEPARATOR = False\nUSE_TZ = True\nUSE_X_FORWARDED_HOST = False\nUSE_X_FORWARDED_PORT = False\nWSGI_APPLICATION = 'project_a.wsgi.application'\nX_FRAME_OPTIONS = 'DENY'\nYEAR_MONTH_FORMAT = 'F Y'\n\n\nYou're seeing this error because you have DEBUG = True in your\nDjango settings file. Change that to False, and Django will\ndisplay a standard page generated by the handler for this status code.",
        }
